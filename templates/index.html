{% extends 'base.html' %}
{% include 'header.html' %}

{% block title %} Home {% endblock %}

{% block body %}
<div class="content">
    <h1 id="content-title" class="typing-animation">Lembro-me de que? üí¨</h1>
    {% if tasks|length < 1 %}
    <div class="inicial">Sem tarefas por aqui. Crie algumas agora!</div>
    {% else %}
    
    <div class="form">
        <form action="/" method="POST">
            <input type="text" name="content" id="content" placeholder="Crie uma tarefa..." required>
            <input type="submit" class="nova-tarefa" value="+">
        </form>
    </div><br>

    <table>
        <tr>
            <th>Tarefa</th>
            <th>Data Cria√ß√£o</th>
            <th>Data Finaliza√ß√£o</th>
            <th>Data Prioridade</th>
            <th>Progresso</th>
            <th>Prioridade</th>
            <th>A√ß√£o</th>
            <th>Observa√ß√£o</th>
        </tr>
        {% for task in tasks %}
        <tr>
            <td class="first">{{ task.content }}</td>
            <td>{{ task.dt_inicio.date() }}</td>
            {% if task.dt_final %}
                <td>{{ task.dt_final }}</td>
            {% else %}
                <td>-</td>
            {% endif %}
            {% if task.dt_priority %}
                <td>{{ task.dt_priority }}</td>
            {% else %}
                <td>-</td>
            {% endif %}
            <td>{{ task.progress }}</td>
            <td><input class="last" type="checkbox" name="priority" id="priority"></td>
            <td>
                <a href="/update/{{ task.id }}"><img src="/static/images/botao_editar.svg" title="Editar"></a>
                <a href="/delete/{{ task.id }}"><img src="/static/images/botao_excluir.svg" title="Excluir" onclick="return confirm('Deseja excluir essa Tarefa?')"></a>
            </td>
            {% if task.observa %}
                <td>{{ task.observa }}</td>
            {% else %}
                <td></td>
            {% endif %}
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</div><br>

<div class="center">
    <div class="pagination">
        {% if pagination.has_prev %}
            <a href="/?page={{ pagination.prev_num }}">&raquo;</a>
        {% else %}
        <a>&laquo;</a>
        {% endif %}

        {% for page_num in pagination.iter_pages() %}
        {% if page_num %}
        {% if page_num != pagination.page %}
            <a href="/?page={{ page_num }}">{{ page_num }}</a>
        {% else %}
            <a>{{ page_num }}</a>
        {% endif %}
        {% else %}
            <a>...</a>
        {% endif %}
        {% endfor %}

        {% if pagination.has_next %}
            <a href="/?page={{ pagination.next_num }}">&raquo;</a>
        {% else %}
            <a>&laquo;</a>
        {% endif %}
    </div>
</div>
{% endblock %}